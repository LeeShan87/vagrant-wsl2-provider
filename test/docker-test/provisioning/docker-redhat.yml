---
- name: Install Podman on RedHat-based systems
  hosts: all
  become: yes
  tasks:
    - name: Update package cache
      dnf:
        update_cache: yes

    - name: Install required packages
      dnf:
        name:
          - ca-certificates
          - curl
          - iptables
        state: present

    - name: Install Podman (Docker compatible)
      dnf:
        name:
          - podman
          - podman-docker
        state: present

    - name: Verify Podman is working
      command: podman info
      register: podman_info
      changed_when: false

    - name: Show Podman version
      debug:
        msg: "Podman is installed (Docker CLI compatibility enabled)"
